## [CH02_27] (인프라) 오토스케일링 설정 (AWS Autoscaling Group과 AMI)

### 오토스케일링
- ELB에 연결된 EC2를 늘렸다가 줄였다가 하는 것
- 유저가 적을때는 비용을 아끼고, 유저가 많을때는 서버 과부하를 막음

### 오토스케일링 설정 프로세스
- 서버 세팅
- 이미지 생성
- 시작 템플릿 생성
  - 오로지 AWS만을 위한 템플릿
- 대상 그룹 생성
- ALB 생성
  - Load Balancer
- Auto Scaling 그룹 생성
  - 시작 템플릿까지 포함 필요

### 실습 절차
- 이미지 생성
  - AMI에 무언가 생성됨
- 시작 템플릿
  - AMI, 이미지를 지정함
  - 이전에 생성했던 이미지를 지정함
  - 인스턴스 유형: t2 micro
  - 시작 템플릿 생성
- 대상 그룹
  - Instances
  - Target group name 지정
  - HTTP, Health check 지정(살아있는 url)
  - default 대상 그룹 1개만 지정
- 로드 밸런서 구성
  - HTTP/HTTPS
  - 이름 지정
  - 리스너 추가: HTTP
  - 가용 영역 모두 선택
  - 라우팅 구성: 대상 그룹 지정
- Auto Scaling 그룹 생성
  - 이름 지정
  - 시작 템플릿: 아까 생성했던 템플릿 지정
  - 버전: Latest(1)
  - 로드 밸런싱: 관리를 위해 로드 밸런서를 지정하는 것이 좋음(일종의 그룹)
    - 대상 그룹에서 선택
    - 상태 확인 - 선택 사항
      - ELB
      - 유예 기간 300초
    - 그룹 크기
      - 원하는 용량, 최소, 최대: 1, 1, 10
    - 조정 정책
      - 이름 설정
      - 평균 CPU 사용률 50 이상
      - 인스턴스 요구사항(초기 유예 시간)
    - 알림 추가
      - 인스턴스가 추가되었을때의 알림 설정
    - Auto Scaling 그룹 생성

### 모니터링
- Auto Scaling 그룹내에서 특정 그룹을 선택하여 **모니터링 탭**으로 상태 확인 가능
